<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>example-shader</title>
</head>
<style type="text/css">
	body ,#container{
		width: 100%;
		height: 100%;
		background-color: #000;
	}
</style>
<body>

	<!-- <div>教程地址:http://www.cnblogs.com/yiyezhai/archive/2013/01/21/2864358.html</div> -->
	<div id="container"></div>
	<!-- // <script src="//cdn.bootcss.com/three.js/r83/three.min.js"></script> -->
	<!-- // <script src="//cdn.bootcss.com/three.js/r68/three.min.js"></script> -->
  <!-- // <script src="//cdn.bootcss.com/three.js/r71/three.min.js"></script> -->
  <!-- // <script src="//cdn.bootcss.com/three.js/r83/three.min.js"></script> -->
  <script src="//cdn.bootcss.com/three.js/r82/three.min.js"></script>
	<script src="//cdn.bootcss.com/jquery/3.1.1/jquery.min.js"></script>
	
	<script type="text/javascript">
         var renderer;
         var camera;
         var scene;

         scene =new THREE.Scene()
         
         camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,1,1000);
         camera.position.set(0,0,100);
         scene.add(camera)

         renderer =  new  THREE.WebGLRenderer();
         renderer.setSize(window.innerWidth,window.innerHeight)
         $("#container").append(renderer.domElement)
        

         var particalCount = 1000;
         var geom = new THREE.Geometry();
         var pMaterial = new THREE.PointsMaterial({
             color: 0xffffff,
             size: 20,
             map: THREE.ImageUtils.loadTexture('./bubble.png'),
             // blending: THREE.AdditiveBlending,
             transparent: true
         })

         for(var i = 0;i< particalCount;i++){
         var vertex = new THREE.Vector3();
        vertex.x = Math.random() * 500 - 250;
        vertex.y = Math.random() * 500 - 250;
        vertex.z = Math.random() * 500 - 250;

        geom.vertices.push(vertex);
         }

         

         //创建粒子系统
         var particles = new THREE.Points(geom,pMaterial);
         scene.add(particles);

         function update() {
           // amplitude来自于frame的正弦值
         // particles.rotation.x -= 0.01;
         particles.position.y += 0.05;
         // if(particles.position.y >100){
         //  particles.position.y=0;
         // }


          var pCount = particalCount;
          var velocity = 0;
          // console.log(pCount);

          while(pCount--){
            var particle = geom.vertices[pCount];
            

            // if(particle.y > 100) {
            //      particle.y = 0;
            //      velocity = 0;
            // }

             velocity = Math.random() * 500-250;
                        
            particle.setX(velocity);
            // console.log(particle);

          }

           // particleSystem.geometry.__dirtyVertices = true;          
          
           renderer.render(scene, camera);
           // 指定下一次屏幕刷新时，调用update
           requestAnimationFrame(update);
         }

         update();

         requestAnimationFrame(update);
         
	</script>	
</body>
</html>